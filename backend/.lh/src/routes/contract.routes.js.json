{
    "sourceFile": "src/routes/contract.routes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1770570317497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1770570407693,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,28 +5,30 @@\n import contractController from \"../modules/contract/contract.controller.js\";\r\n \r\n const router = express.Router();\r\n \r\n-// Ensure upload folder exists\r\n+// Ensure uploads/contracts folder exists\r\n const uploadDir = path.join(process.cwd(), \"uploads/contracts\");\r\n if (!fs.existsSync(uploadDir)) fs.mkdirSync(uploadDir, { recursive: true });\r\n \r\n-// Multer storage\r\n+// Setup multer storage\r\n const storage = multer.diskStorage({\r\n-    destination: (req, file, cb) => cb(null, \"uploads/contracts\"),\r\n-    filename: (req, file, cb) => {\r\n+    destination: function (req, file, cb) {\r\n+        cb(null, \"uploads/contracts\");\r\n+    },\r\n+    filename: function (req, file, cb) {\r\n         const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\r\n         cb(null, uniqueSuffix + \"-\" + file.originalname);\r\n     },\r\n });\r\n \r\n const upload = multer({ storage });\r\n \r\n // Routes\r\n-router.post(\"/\", upload.single(\"documentUrl\"), contractController.upload);\r\n-router.put(\"/:id\", upload.single(\"documentUrl\"), contractController.update);\r\n+router.post(\"/\", upload.single(\"document\"), contractController.upload);\r\n+router.put(\"/:id\", upload.single(\"document\"), contractController.update);\r\n router.get(\"/\", contractController.getAll);\r\n+router.get(\"/:id\", contractController.getById);\r\n router.get(\"/loan/:loanId\", contractController.getByLoan);\r\n-router.get(\"/:id\", contractController.getById);\r\n router.delete(\"/:id\", contractController.delete);\r\n \r\n export default router;\r\n"
                },
                {
                    "date": 1770571295514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,34 +1,37 @@\n import express from \"express\";\r\n import multer from \"multer\";\r\n import path from \"path\";\r\n import fs from \"fs\";\r\n-import contractController from \"../modules/contract/contract.controller.js\";\r\n+import {\r\n+    upload,\r\n+    update,\r\n+    getAll,\r\n+    getById,\r\n+    getByLoan,\r\n+    deleteContract,\r\n+} from \"../modules/contract/contract.controller.js\";\r\n \r\n const router = express.Router();\r\n \r\n // Ensure uploads/contracts folder exists\r\n const uploadDir = path.join(process.cwd(), \"uploads/contracts\");\r\n if (!fs.existsSync(uploadDir)) fs.mkdirSync(uploadDir, { recursive: true });\r\n \r\n-// Setup multer storage\r\n+// Multer storage\r\n const storage = multer.diskStorage({\r\n-    destination: function (req, file, cb) {\r\n-        cb(null, \"uploads/contracts\");\r\n-    },\r\n-    filename: function (req, file, cb) {\r\n+    destination: (req, file, cb) => cb(null, \"uploads/contracts\"),\r\n+    filename: (req, file, cb) => {\r\n         const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\r\n         cb(null, uniqueSuffix + \"-\" + file.originalname);\r\n     },\r\n });\r\n+const uploadMiddleware = multer({ storage });\r\n \r\n-const upload = multer({ storage });\r\n+router.post(\"/\", uploadMiddleware.single(\"documentUrl\"), upload);\r\n+router.put(\"/:id\", uploadMiddleware.single(\"documentUrl\"), update);\r\n+router.get(\"/\", getAll);\r\n+router.get(\"/:id\", getById);\r\n+router.get(\"/loan/:loanId\", getByLoan);\r\n+router.delete(\"/:id\", deleteContract);\r\n \r\n-// Routes\r\n-router.post(\"/\", upload.single(\"document\"), contractController.upload);\r\n-router.put(\"/:id\", upload.single(\"document\"), contractController.update);\r\n-router.get(\"/\", contractController.getAll);\r\n-router.get(\"/:id\", contractController.getById);\r\n-router.get(\"/loan/:loanId\", contractController.getByLoan);\r\n-router.delete(\"/:id\", contractController.delete);\r\n-\r\n export default router;\r\n"
                },
                {
                    "date": 1770571365930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,37 +1,34 @@\n import express from \"express\";\r\n import multer from \"multer\";\r\n import path from \"path\";\r\n import fs from \"fs\";\r\n-import {\r\n-    upload,\r\n-    update,\r\n-    getAll,\r\n-    getById,\r\n-    getByLoan,\r\n-    deleteContract,\r\n-} from \"../modules/contract/contract.controller.js\";\r\n+import contractController from \"../modules/contract/contract.controller.js\";\r\n \r\n const router = express.Router();\r\n \r\n // Ensure uploads/contracts folder exists\r\n const uploadDir = path.join(process.cwd(), \"uploads/contracts\");\r\n if (!fs.existsSync(uploadDir)) fs.mkdirSync(uploadDir, { recursive: true });\r\n \r\n-// Multer storage\r\n+// Setup multer storage\r\n const storage = multer.diskStorage({\r\n-    destination: (req, file, cb) => cb(null, \"uploads/contracts\"),\r\n-    filename: (req, file, cb) => {\r\n+    destination: function (req, file, cb) {\r\n+        cb(null, \"uploads/contracts\");\r\n+    },\r\n+    filename: function (req, file, cb) {\r\n         const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\r\n         cb(null, uniqueSuffix + \"-\" + file.originalname);\r\n     },\r\n });\r\n-const uploadMiddleware = multer({ storage });\r\n \r\n-router.post(\"/\", uploadMiddleware.single(\"documentUrl\"), upload);\r\n-router.put(\"/:id\", uploadMiddleware.single(\"documentUrl\"), update);\r\n-router.get(\"/\", getAll);\r\n-router.get(\"/:id\", getById);\r\n-router.get(\"/loan/:loanId\", getByLoan);\r\n-router.delete(\"/:id\", deleteContract);\r\n+const upload = multer({ storage });\r\n \r\n+// Routes\r\n+router.post(\"/\", upload.single(\"document\"), contractController.upload);\r\n+router.put(\"/:id\", upload.single(\"document\"), contractController.update);\r\n+router.get(\"/\", contractController.getAll);\r\n+router.get(\"/:id\", contractController.getById);\r\n+router.get(\"/loan/:loanId\", contractController.getByLoan);\r\n+router.delete(\"/:id\", contractController.delete);\r\n+\r\n export default router;\r\n"
                }
            ],
            "date": 1770570317497,
            "name": "Commit-0",
            "content": "import express from \"express\";\r\nimport multer from \"multer\";\r\nimport path from \"path\";\r\nimport fs from \"fs\";\r\nimport contractController from \"../modules/contract/contract.controller.js\";\r\n\r\nconst router = express.Router();\r\n\r\n// Ensure upload folder exists\r\nconst uploadDir = path.join(process.cwd(), \"uploads/contracts\");\r\nif (!fs.existsSync(uploadDir)) fs.mkdirSync(uploadDir, { recursive: true });\r\n\r\n// Multer storage\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, cb) => cb(null, \"uploads/contracts\"),\r\n    filename: (req, file, cb) => {\r\n        const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\r\n        cb(null, uniqueSuffix + \"-\" + file.originalname);\r\n    },\r\n});\r\n\r\nconst upload = multer({ storage });\r\n\r\n// Routes\r\nrouter.post(\"/\", upload.single(\"documentUrl\"), contractController.upload);\r\nrouter.put(\"/:id\", upload.single(\"documentUrl\"), contractController.update);\r\nrouter.get(\"/\", contractController.getAll);\r\nrouter.get(\"/loan/:loanId\", contractController.getByLoan);\r\nrouter.get(\"/:id\", contractController.getById);\r\nrouter.delete(\"/:id\", contractController.delete);\r\n\r\nexport default router;\r\n"
        }
    ]
}