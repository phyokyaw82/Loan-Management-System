{
    "sourceFile": "src/pages/Transactions/TransactionList.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1770565869075,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1770566026997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n         const data = await getTransactions();\r\n         setTransactions(data);\r\n     };\r\n \r\n-    // Fetch all loans to get borrower names\r\n+    // Fetch all loans to map loanId → loan object\r\n     const fetchLoans = async () => {\r\n         const loanList = await getLoans();\r\n         const loanMap = {};\r\n         loanList.forEach((l) => {\r\n@@ -22,35 +22,37 @@\n         });\r\n         setLoans(loanMap);\r\n     };\r\n \r\n+    useEffect(() => {\r\n+        fetchTransactions();\r\n+        fetchLoans();\r\n+    }, []);\r\n+\r\n     const handleDelete = async (id) => {\r\n         if (window.confirm(\"Are you sure you want to delete this transaction?\")) {\r\n             await deleteTransaction(id);\r\n             fetchTransactions();\r\n         }\r\n     };\r\n \r\n-    useEffect(() => {\r\n-        fetchTransactions();\r\n-        fetchLoans();\r\n-    }, []);\r\n-\r\n     return (\r\n         <div>\r\n             <h1 className=\"text-2xl font-bold mb-4\">Transactions</h1>\r\n+\r\n             <Link\r\n                 to=\"/transactions/new\"\r\n                 className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n             >\r\n                 Add Transaction\r\n             </Link>\r\n+\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n                         <th className=\"py-2 px-4 border\">Borrower</th>\r\n                         <th className=\"py-2 px-4 border\">Loan</th>\r\n-                        <th className=\"py-2 px-4 border\">Date</th>\r\n+                        <th className=\"py-2 px-4 border\">Transaction Date</th>\r\n                         <th className=\"py-2 px-4 border\">Type</th>\r\n                         <th className=\"py-2 px-4 border\">Amount</th>\r\n                         <th className=\"py-2 px-4 border\">Description</th>\r\n                         <th className=\"py-2 px-4 border\">Actions</th>\r\n@@ -59,22 +61,38 @@\n                 <tbody>\r\n                     {transactions.length > 0 ? (\r\n                         transactions.map((t) => {\r\n                             const loan = loans[t.loan?._id || t.loan];\r\n+\r\n                             return (\r\n                                 <tr key={t._id}>\r\n+                                    {/* Borrower Name */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n                                         {loan?.borrower?.fullName || \"Unknown\"}\r\n                                     </td>\r\n+\r\n+                                    {/* Loan ID + Amount */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n-                                        {loan ? `${loan._id} - ${loan.amount}` : t.loan}\r\n+                                        {loan ? `${loan._id} - ${loan.amount}` : \"Unknown\"}\r\n                                     </td>\r\n+\r\n+                                    {/* Transaction Date */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n-                                        {t.transactionDate ? t.transactionDate.slice(0, 10) : \"\"}\r\n+                                        {t.transactionDate\r\n+                                            ? t.transactionDate.slice(0, 10)\r\n+                                            : \"\"}\r\n                                     </td>\r\n+\r\n+                                    {/* Type */}\r\n                                     <td className=\"py-2 px-4 border\">{t.type}</td>\r\n+\r\n+                                    {/* Amount */}\r\n                                     <td className=\"py-2 px-4 border\">{t.amount}</td>\r\n+\r\n+                                    {/* Description */}\r\n                                     <td className=\"py-2 px-4 border\">{t.description || \"-\"}</td>\r\n+\r\n+                                    {/* Actions */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n                                         <Link\r\n                                             to={`/transactions/edit/${t._id}`}\r\n                                             className=\"text-blue-500 mr-2\"\r\n@@ -92,9 +110,12 @@\n                             );\r\n                         })\r\n                     ) : (\r\n                         <tr>\r\n-                            <td colSpan=\"7\" className=\"py-2 px-4 text-center text-gray-500\">\r\n+                            <td\r\n+                                colSpan=\"7\"\r\n+                                className=\"py-2 px-4 text-center text-gray-500\"\r\n+                            >\r\n                                 No transactions found.\r\n                             </td>\r\n                         </tr>\r\n                     )}\r\n"
                },
                {
                    "date": 1770566464019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,8 @@\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n                         <th className=\"py-2 px-4 border\">Borrower</th>\r\n-                        <th className=\"py-2 px-4 border\">Loan</th>\r\n                         <th className=\"py-2 px-4 border\">Transaction Date</th>\r\n                         <th className=\"py-2 px-4 border\">Type</th>\r\n                         <th className=\"py-2 px-4 border\">Amount</th>\r\n                         <th className=\"py-2 px-4 border\">Description</th>\r\n@@ -69,13 +68,8 @@\n                                     <td className=\"py-2 px-4 border\">\r\n                                         {loan?.borrower?.fullName || \"Unknown\"}\r\n                                     </td>\r\n \r\n-                                    {/* Loan ID + Amount */}\r\n-                                    <td className=\"py-2 px-4 border\">\r\n-                                        {loan ? `${loan._id} - ${loan.amount}` : \"Unknown\"}\r\n-                                    </td>\r\n-\r\n                                     {/* Transaction Date */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n                                         {t.transactionDate\r\n                                             ? t.transactionDate.slice(0, 10)\r\n"
                },
                {
                    "date": 1770566726383,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,11 +65,14 @@\n                             return (\r\n                                 <tr key={t._id}>\r\n                                     {/* Borrower Name */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n-                                        {loan?.borrower?.fullName || \"Unknown\"}\r\n+                                        {loan?.borrower?.fullName\r\n+                                            ? `${loan.borrower.fullName}-${loan.amount}`\r\n+                                            : \"Unknown\"}\r\n                                     </td>\r\n \r\n+\r\n                                     {/* Transaction Date */}\r\n                                     <td className=\"py-2 px-4 border\">\r\n                                         {t.transactionDate\r\n                                             ? t.transactionDate.slice(0, 10)\r\n"
                },
                {
                    "date": 1770576220498,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import { useEffect, useState } from \"react\";\r\n import { getTransactions, deleteTransaction } from \"../../api/transactionApi\";\r\n import { getLoans } from \"../../api/loanApi\";\r\n import { Link } from \"react-router-dom\";\r\n+import PageToolbar from \"../../components/PageToolbar\";\r\n \r\n const TransactionList = () => {\r\n     const [transactions, setTransactions] = useState([]);\r\n     const [loans, setLoans] = useState({}); // loanId => loan data\r\n@@ -35,18 +36,10 @@\n         }\r\n     };\r\n \r\n     return (\r\n-        <div>\r\n-            <h1 className=\"text-2xl font-bold mb-4\">Transactions</h1>\r\n-\r\n-            <Link\r\n-                to=\"/transactions/new\"\r\n-                className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n-            >\r\n-                Add Transaction\r\n-            </Link>\r\n-\r\n+        <>\r\n+            <PageToolbar title=\"Transactions\" buttonLabel=\"Add Transaction\" buttonLink=\"/transactions/new\" />\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n                         <th className=\"py-2 px-4 border\">Borrower</th>\r\n@@ -117,9 +110,9 @@\n                         </tr>\r\n                     )}\r\n                 </tbody>\r\n             </table>\r\n-        </div>\r\n+        </>\r\n     );\r\n };\r\n \r\n export default TransactionList;\r\n"
                },
                {
                    "date": 1770576708074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,117 +1,84 @@\n import { useEffect, useState } from \"react\";\r\n import { getTransactions, deleteTransaction } from \"../../api/transactionApi\";\r\n import { getLoans } from \"../../api/loanApi\";\r\n-import { Link } from \"react-router-dom\";\r\n import PageToolbar from \"../../components/PageToolbar\";\r\n+import DataTable from \"../../components/DataTable\";\r\n \r\n const TransactionList = () => {\r\n     const [transactions, setTransactions] = useState([]);\r\n-    const [loans, setLoans] = useState({}); // loanId => loan data\r\n+    const [loans, setLoans] = useState({}); // loanId => loan object\r\n \r\n-    // Fetch all transactions\r\n     const fetchTransactions = async () => {\r\n         const data = await getTransactions();\r\n         setTransactions(data);\r\n     };\r\n \r\n-    // Fetch all loans to map loanId → loan object\r\n     const fetchLoans = async () => {\r\n         const loanList = await getLoans();\r\n         const loanMap = {};\r\n-        loanList.forEach((l) => {\r\n-            loanMap[l._id] = l;\r\n-        });\r\n+        loanList.forEach((l) => (loanMap[l._id] = l));\r\n         setLoans(loanMap);\r\n     };\r\n \r\n     useEffect(() => {\r\n         fetchTransactions();\r\n         fetchLoans();\r\n     }, []);\r\n \r\n-    const handleDelete = async (id) => {\r\n+    const handleDelete = async (transaction) => {\r\n         if (window.confirm(\"Are you sure you want to delete this transaction?\")) {\r\n-            await deleteTransaction(id);\r\n+            await deleteTransaction(transaction._id);\r\n             fetchTransactions();\r\n         }\r\n     };\r\n \r\n+    // Columns configuration\r\n+    const columns = [\r\n+        {\r\n+            key: \"borrower\",\r\n+            label: \"Borrower\",\r\n+            render: (t) => {\r\n+                const loan = loans[t.loan?._id || t.loan];\r\n+                return loan?.borrower?.fullName\r\n+                    ? `${loan.borrower.fullName}-${loan.amount}`\r\n+                    : \"Unknown\";\r\n+            },\r\n+        },\r\n+        {\r\n+            key: \"transactionDate\",\r\n+            label: \"Transaction Date\",\r\n+            render: (t) => (t.transactionDate ? t.transactionDate.slice(0, 10) : \"-\"),\r\n+        },\r\n+        { key: \"type\", label: \"Type\" },\r\n+        { key: \"amount\", label: \"Amount\" },\r\n+        { key: \"description\", label: \"Description\", render: (t) => t.description || \"-\" },\r\n+    ];\r\n+\r\n+    // Actions configuration\r\n+    const actions = [\r\n+        {\r\n+            type: \"link\",\r\n+            label: \"Edit\",\r\n+            to: (t) => `/transactions/edit/${t._id}`,\r\n+            className: \"text-blue-500\",\r\n+        },\r\n+        {\r\n+            type: \"button\",\r\n+            label: \"Delete\",\r\n+            onClick: handleDelete,\r\n+            className: \"text-red-500\",\r\n+        },\r\n+    ];\r\n+\r\n     return (\r\n         <>\r\n-            <PageToolbar title=\"Transactions\" buttonLabel=\"Add Transaction\" buttonLink=\"/transactions/new\" />\r\n-            <table className=\"min-w-full bg-white border\">\r\n-                <thead>\r\n-                    <tr>\r\n-                        <th className=\"py-2 px-4 border\">Borrower</th>\r\n-                        <th className=\"py-2 px-4 border\">Transaction Date</th>\r\n-                        <th className=\"py-2 px-4 border\">Type</th>\r\n-                        <th className=\"py-2 px-4 border\">Amount</th>\r\n-                        <th className=\"py-2 px-4 border\">Description</th>\r\n-                        <th className=\"py-2 px-4 border\">Actions</th>\r\n-                    </tr>\r\n-                </thead>\r\n-                <tbody>\r\n-                    {transactions.length > 0 ? (\r\n-                        transactions.map((t) => {\r\n-                            const loan = loans[t.loan?._id || t.loan];\r\n-\r\n-                            return (\r\n-                                <tr key={t._id}>\r\n-                                    {/* Borrower Name */}\r\n-                                    <td className=\"py-2 px-4 border\">\r\n-                                        {loan?.borrower?.fullName\r\n-                                            ? `${loan.borrower.fullName}-${loan.amount}`\r\n-                                            : \"Unknown\"}\r\n-                                    </td>\r\n-\r\n-\r\n-                                    {/* Transaction Date */}\r\n-                                    <td className=\"py-2 px-4 border\">\r\n-                                        {t.transactionDate\r\n-                                            ? t.transactionDate.slice(0, 10)\r\n-                                            : \"\"}\r\n-                                    </td>\r\n-\r\n-                                    {/* Type */}\r\n-                                    <td className=\"py-2 px-4 border\">{t.type}</td>\r\n-\r\n-                                    {/* Amount */}\r\n-                                    <td className=\"py-2 px-4 border\">{t.amount}</td>\r\n-\r\n-                                    {/* Description */}\r\n-                                    <td className=\"py-2 px-4 border\">{t.description || \"-\"}</td>\r\n-\r\n-                                    {/* Actions */}\r\n-                                    <td className=\"py-2 px-4 border\">\r\n-                                        <Link\r\n-                                            to={`/transactions/edit/${t._id}`}\r\n-                                            className=\"text-blue-500 mr-2\"\r\n-                                        >\r\n-                                            Edit\r\n-                                        </Link>\r\n-                                        <button\r\n-                                            onClick={() => handleDelete(t._id)}\r\n-                                            className=\"text-red-500\"\r\n-                                        >\r\n-                                            Delete\r\n-                                        </button>\r\n-                                    </td>\r\n-                                </tr>\r\n-                            );\r\n-                        })\r\n-                    ) : (\r\n-                        <tr>\r\n-                            <td\r\n-                                colSpan=\"7\"\r\n-                                className=\"py-2 px-4 text-center text-gray-500\"\r\n-                            >\r\n-                                No transactions found.\r\n-                            </td>\r\n-                        </tr>\r\n-                    )}\r\n-                </tbody>\r\n-            </table>\r\n+            <PageToolbar\r\n+                title=\"Transactions\"\r\n+                buttonLabel=\"Add Transaction\"\r\n+                buttonLink=\"/transactions/new\"\r\n+            />\r\n+            <DataTable columns={columns} data={transactions} actions={actions} />\r\n         </>\r\n     );\r\n };\r\n \r\n"
                }
            ],
            "date": 1770565869075,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\r\nimport { getTransactions, deleteTransaction } from \"../../api/transactionApi\";\r\nimport { getLoans } from \"../../api/loanApi\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst TransactionList = () => {\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loans, setLoans] = useState({}); // loanId => loan data\r\n\r\n    // Fetch all transactions\r\n    const fetchTransactions = async () => {\r\n        const data = await getTransactions();\r\n        setTransactions(data);\r\n    };\r\n\r\n    // Fetch all loans to get borrower names\r\n    const fetchLoans = async () => {\r\n        const loanList = await getLoans();\r\n        const loanMap = {};\r\n        loanList.forEach((l) => {\r\n            loanMap[l._id] = l;\r\n        });\r\n        setLoans(loanMap);\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm(\"Are you sure you want to delete this transaction?\")) {\r\n            await deleteTransaction(id);\r\n            fetchTransactions();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchTransactions();\r\n        fetchLoans();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-4\">Transactions</h1>\r\n            <Link\r\n                to=\"/transactions/new\"\r\n                className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n            >\r\n                Add Transaction\r\n            </Link>\r\n            <table className=\"min-w-full bg-white border\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"py-2 px-4 border\">Borrower</th>\r\n                        <th className=\"py-2 px-4 border\">Loan</th>\r\n                        <th className=\"py-2 px-4 border\">Date</th>\r\n                        <th className=\"py-2 px-4 border\">Type</th>\r\n                        <th className=\"py-2 px-4 border\">Amount</th>\r\n                        <th className=\"py-2 px-4 border\">Description</th>\r\n                        <th className=\"py-2 px-4 border\">Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {transactions.length > 0 ? (\r\n                        transactions.map((t) => {\r\n                            const loan = loans[t.loan?._id || t.loan];\r\n                            return (\r\n                                <tr key={t._id}>\r\n                                    <td className=\"py-2 px-4 border\">\r\n                                        {loan?.borrower?.fullName || \"Unknown\"}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-4 border\">\r\n                                        {loan ? `${loan._id} - ${loan.amount}` : t.loan}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-4 border\">\r\n                                        {t.transactionDate ? t.transactionDate.slice(0, 10) : \"\"}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-4 border\">{t.type}</td>\r\n                                    <td className=\"py-2 px-4 border\">{t.amount}</td>\r\n                                    <td className=\"py-2 px-4 border\">{t.description || \"-\"}</td>\r\n                                    <td className=\"py-2 px-4 border\">\r\n                                        <Link\r\n                                            to={`/transactions/edit/${t._id}`}\r\n                                            className=\"text-blue-500 mr-2\"\r\n                                        >\r\n                                            Edit\r\n                                        </Link>\r\n                                        <button\r\n                                            onClick={() => handleDelete(t._id)}\r\n                                            className=\"text-red-500\"\r\n                                        >\r\n                                            Delete\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"7\" className=\"py-2 px-4 text-center text-gray-500\">\r\n                                No transactions found.\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TransactionList;\r\n"
        }
    ]
}