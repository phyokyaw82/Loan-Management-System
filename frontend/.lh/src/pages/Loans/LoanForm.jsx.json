{
    "sourceFile": "src/pages/Loans/LoanForm.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 18,
            "patches": [
                {
                    "date": 1770563271435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1770563609830,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,50 +1,139 @@\n import { useState, useEffect } from \"react\";\r\n+import { createLoan, updateLoan, getLoanById } from \"../../api/loanApi\";\r\n+import { getBorrowers } from \"../../api/borrowerApi\";\r\n import { useNavigate, useParams } from \"react-router-dom\";\r\n-import { createLoan, getLoanById, updateLoan } from \"../../api/loanApi\";\r\n-import { getBorrowers } from \"../../api/borrowerApi\";\r\n \r\n const LoanForm = () => {\r\n-    const [loan, setLoan] = useState({ borrower: \"\", amount: \"\", type: \"\", startDate: \"\", endDate: \"\", interestRate: \"\" });\r\n     const [borrowers, setBorrowers] = useState([]);\r\n+    const [formData, setFormData] = useState({\r\n+        borrower: \"\",\r\n+        amount: \"\",\r\n+        type: \"Personal\",\r\n+        interestRate: \"\",\r\n+        startDate: \"\",\r\n+        endDate: \"\",\r\n+    });\r\n+\r\n     const navigate = useNavigate();\r\n-    const { id } = useParams();\r\n+    const { id } = useParams(); // for edit\r\n \r\n     useEffect(() => {\r\n         getBorrowers().then(setBorrowers);\r\n-        if (id) getLoanById(id).then(setLoan);\r\n+\r\n+        if (id) {\r\n+            getLoanById(id).then((loan) => {\r\n+                setFormData({\r\n+                    borrower: loan.borrower._id,\r\n+                    amount: loan.amount,\r\n+                    type: loan.type,\r\n+                    interestRate: loan.interestRate,\r\n+                    startDate: loan.startDate ? loan.startDate.slice(0, 10) : \"\",\r\n+                    endDate: loan.endDate ? loan.endDate.slice(0, 10) : \"\",\r\n+                });\r\n+            });\r\n+        }\r\n     }, [id]);\r\n \r\n-    const handleChange = e => setLoan({ ...loan, [e.target.name]: e.target.value });\r\n-    const handleSubmit = async e => {\r\n+    const handleChange = (e) =>\r\n+        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+\r\n+    const handleSubmit = async (e) => {\r\n         e.preventDefault();\r\n-        if (id) await updateLoan(id, loan);\r\n-        else await createLoan(loan);\r\n-        navigate(\"/loans\");\r\n+\r\n+        // Convert startDate and endDate to Date objects\r\n+        const payload = {\r\n+            ...formData,\r\n+            amount: Number(formData.amount),\r\n+            interestRate: Number(formData.interestRate),\r\n+            startDate: formData.startDate ? new Date(formData.startDate) : null,\r\n+            endDate: formData.endDate ? new Date(formData.endDate) : null,\r\n+        };\r\n+\r\n+        try {\r\n+            if (id) await updateLoan(id, payload);\r\n+            else await createLoan(payload);\r\n+            navigate(\"/loans\");\r\n+        } catch (err) {\r\n+            console.error(err);\r\n+            alert(\"Error saving loan\");\r\n+        }\r\n     };\r\n \r\n     return (\r\n-        <div className=\"max-w-md mx-auto\">\r\n-            <h1 className=\"text-2xl font-bold mb-4\">{id ? \"Edit\" : \"Add\"} Loan</h1>\r\n-            <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n-                <label>Borrower</label>\r\n-                <select name=\"borrower\" value={loan.borrower} onChange={handleChange} className=\"w-full border p-2\">\r\n-                    <option value=\"\">Select Borrower</option>\r\n-                    {borrowers.map(b => <option key={b._id} value={b._id}>{b.fullName}</option>)}\r\n-                </select>\r\n-                <label>Amount</label>\r\n-                <input type=\"number\" name=\"amount\" value={loan.amount} onChange={handleChange} className=\"w-full border p-2\" />\r\n-                <label>Loan Type</label>\r\n-                <input type=\"text\" name=\"type\" value={loan.type} onChange={handleChange} className=\"w-full border p-2\" />\r\n-                <label>Start Date</label>\r\n-                <input type=\"date\" name=\"startDate\" value={loan.startDate} onChange={handleChange} className=\"w-full border p-2\" />\r\n-                <label>End Date</label>\r\n-                <input type=\"date\" name=\"endDate\" value={loan.endDate} onChange={handleChange} className=\"w-full border p-2\" />\r\n-                <label>Interest Rate (%)</label>\r\n-                <input type=\"number\" name=\"interestRate\" value={loan.interestRate} onChange={handleChange} className=\"w-full border p-2\" />\r\n-                <button type=\"submit\" className=\"bg-gray-500 text-white px-4 py-2 rounded\">{id ? \"Update\" : \"Create\"}</button>\r\n-            </form>\r\n-        </div>\r\n+        <form\r\n+            onSubmit={handleSubmit}\r\n+            className=\"bg-gray-800 p-6 rounded shadow space-y-4 text-gray-100\"\r\n+        >\r\n+            <label>Borrower</label>\r\n+            <select\r\n+                name=\"borrower\"\r\n+                value={formData.borrower}\r\n+                onChange={handleChange}\r\n+                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n+            >\r\n+                <option value=\"\">Select Borrower</option>\r\n+                {borrowers.map((b) => (\r\n+                    <option key={b._id} value={b._id}>\r\n+                        {b.fullName}\r\n+                    </option>\r\n+                ))}\r\n+            </select>\r\n+\r\n+            <label>Amount</label>\r\n+            <input\r\n+                type=\"number\"\r\n+                name=\"amount\"\r\n+                value={formData.amount}\r\n+                onChange={handleChange}\r\n+                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n+            />\r\n+\r\n+            <label>Loan Type</label>\r\n+            <select\r\n+                name=\"type\"\r\n+                value={formData.type}\r\n+                onChange={handleChange}\r\n+                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n+            >\r\n+                <option value=\"Personal\">Personal</option>\r\n+                <option value=\"Mortgage\">Mortgage</option>\r\n+            </select>\r\n+\r\n+            <label>Interest Rate (%)</label>\r\n+            <input\r\n+                type=\"number\"\r\n+                name=\"interestRate\"\r\n+                value={formData.interestRate}\r\n+                onChange={handleChange}\r\n+                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n+            />\r\n+\r\n+            <label>Start Date</label>\r\n+            <input\r\n+                type=\"date\"\r\n+                name=\"startDate\"\r\n+                value={formData.startDate}\r\n+                onChange={handleChange}\r\n+                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n+            />\r\n+\r\n+            <label>End Date</label>\r\n+            <input\r\n+                type=\"date\"\r\n+                name=\"endDate\"\r\n+                value={formData.endDate}\r\n+                onChange={handleChange}\r\n+                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n+            />\r\n+\r\n+            <button\r\n+                type=\"submit\"\r\n+                className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\"\r\n+            >\r\n+                {id ? \"Update Loan\" : \"Create Loan\"}\r\n+            </button>\r\n+        </form>\r\n     );\r\n };\r\n \r\n export default LoanForm;\r\n"
                },
                {
                    "date": 1770563729371,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,9 @@\n \r\n     const handleSubmit = async (e) => {\r\n         e.preventDefault();\r\n \r\n-        // Convert startDate and endDate to Date objects\r\n+        // Only fix: convert startDate and endDate to Date objects\r\n         const payload = {\r\n             ...formData,\r\n             amount: Number(formData.amount),\r\n             interestRate: Number(formData.interestRate),\r\n@@ -59,12 +59,9 @@\n         }\r\n     };\r\n \r\n     return (\r\n-        <form\r\n-            onSubmit={handleSubmit}\r\n-            className=\"bg-gray-800 p-6 rounded shadow space-y-4 text-gray-100\"\r\n-        >\r\n+        <form onSubmit={handleSubmit} className=\"bg-gray-800 p-6 rounded shadow space-y-4 text-gray-100\">\r\n             <label>Borrower</label>\r\n             <select\r\n                 name=\"borrower\"\r\n                 value={formData.borrower}\r\n"
                },
                {
                    "date": 1770563843811,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,53 +1,49 @@\n import { useState, useEffect } from \"react\";\r\n-import { createLoan, updateLoan, getLoanById } from \"../../api/loanApi\";\r\n+import { useNavigate, useParams } from \"react-router-dom\";\r\n+import { createLoan, getLoanById, updateLoan } from \"../../api/loanApi\";\r\n import { getBorrowers } from \"../../api/borrowerApi\";\r\n-import { useNavigate, useParams } from \"react-router-dom\";\r\n \r\n const LoanForm = () => {\r\n-    const [borrowers, setBorrowers] = useState([]);\r\n-    const [formData, setFormData] = useState({\r\n+    const [loan, setLoan] = useState({\r\n         borrower: \"\",\r\n         amount: \"\",\r\n-        type: \"Personal\",\r\n-        interestRate: \"\",\r\n+        type: \"\",\r\n         startDate: \"\",\r\n         endDate: \"\",\r\n+        interestRate: \"\",\r\n     });\r\n-\r\n+    const [borrowers, setBorrowers] = useState([]);\r\n     const navigate = useNavigate();\r\n-    const { id } = useParams(); // for edit\r\n+    const { id } = useParams();\r\n \r\n     useEffect(() => {\r\n         getBorrowers().then(setBorrowers);\r\n \r\n         if (id) {\r\n-            getLoanById(id).then((loan) => {\r\n-                setFormData({\r\n-                    borrower: loan.borrower._id,\r\n-                    amount: loan.amount,\r\n-                    type: loan.type,\r\n-                    interestRate: loan.interestRate,\r\n-                    startDate: loan.startDate ? loan.startDate.slice(0, 10) : \"\",\r\n-                    endDate: loan.endDate ? loan.endDate.slice(0, 10) : \"\",\r\n+            getLoanById(id).then((data) => {\r\n+                // Fix: convert dates to YYYY-MM-DD format for input[type=\"date\"]\r\n+                setLoan({\r\n+                    ...data,\r\n+                    startDate: data.startDate ? data.startDate.slice(0, 10) : \"\",\r\n+                    endDate: data.endDate ? data.endDate.slice(0, 10) : \"\",\r\n                 });\r\n             });\r\n         }\r\n     }, [id]);\r\n \r\n-    const handleChange = (e) =>\r\n-        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+    const handleChange = (e) => setLoan({ ...loan, [e.target.name]: e.target.value });\r\n \r\n     const handleSubmit = async (e) => {\r\n         e.preventDefault();\r\n \r\n-        // Only fix: convert startDate and endDate to Date objects\r\n+        // Fix: convert startDate/endDate strings to Date objects for backend\r\n         const payload = {\r\n-            ...formData,\r\n-            amount: Number(formData.amount),\r\n-            interestRate: Number(formData.interestRate),\r\n-            startDate: formData.startDate ? new Date(formData.startDate) : null,\r\n-            endDate: formData.endDate ? new Date(formData.endDate) : null,\r\n+            ...loan,\r\n+            amount: Number(loan.amount),\r\n+            interestRate: Number(loan.interestRate),\r\n+            startDate: loan.startDate ? new Date(loan.startDate) : null,\r\n+            endDate: loan.endDate ? new Date(loan.endDate) : null,\r\n         };\r\n \r\n         try {\r\n             if (id) await updateLoan(id, payload);\r\n@@ -59,78 +55,79 @@\n         }\r\n     };\r\n \r\n     return (\r\n-        <form onSubmit={handleSubmit} className=\"bg-gray-800 p-6 rounded shadow space-y-4 text-gray-100\">\r\n-            <label>Borrower</label>\r\n-            <select\r\n-                name=\"borrower\"\r\n-                value={formData.borrower}\r\n-                onChange={handleChange}\r\n-                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n-            >\r\n-                <option value=\"\">Select Borrower</option>\r\n-                {borrowers.map((b) => (\r\n-                    <option key={b._id} value={b._id}>\r\n-                        {b.fullName}\r\n-                    </option>\r\n-                ))}\r\n-            </select>\r\n+        <div className=\"max-w-md mx-auto\">\r\n+            <h1 className=\"text-2xl font-bold mb-4\">{id ? \"Edit\" : \"Add\"} Loan</h1>\r\n+            <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n+                <label>Borrower</label>\r\n+                <select\r\n+                    name=\"borrower\"\r\n+                    value={loan.borrower}\r\n+                    onChange={handleChange}\r\n+                    className=\"w-full border p-2\"\r\n+                >\r\n+                    <option value=\"\">Select Borrower</option>\r\n+                    {borrowers.map((b) => (\r\n+                        <option key={b._id} value={b._id}>\r\n+                            {b.fullName}\r\n+                        </option>\r\n+                    ))}\r\n+                </select>\r\n \r\n-            <label>Amount</label>\r\n-            <input\r\n-                type=\"number\"\r\n-                name=\"amount\"\r\n-                value={formData.amount}\r\n-                onChange={handleChange}\r\n-                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n-            />\r\n+                <label>Amount</label>\r\n+                <input\r\n+                    type=\"number\"\r\n+                    name=\"amount\"\r\n+                    value={loan.amount}\r\n+                    onChange={handleChange}\r\n+                    className=\"w-full border p-2\"\r\n+                />\r\n \r\n-            <label>Loan Type</label>\r\n-            <select\r\n-                name=\"type\"\r\n-                value={formData.type}\r\n-                onChange={handleChange}\r\n-                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n-            >\r\n-                <option value=\"Personal\">Personal</option>\r\n-                <option value=\"Mortgage\">Mortgage</option>\r\n-            </select>\r\n+                <label>Loan Type</label>\r\n+                <input\r\n+                    type=\"text\"\r\n+                    name=\"type\"\r\n+                    value={loan.type}\r\n+                    onChange={handleChange}\r\n+                    className=\"w-full border p-2\"\r\n+                />\r\n \r\n-            <label>Interest Rate (%)</label>\r\n-            <input\r\n-                type=\"number\"\r\n-                name=\"interestRate\"\r\n-                value={formData.interestRate}\r\n-                onChange={handleChange}\r\n-                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n-            />\r\n+                <label>Start Date</label>\r\n+                <input\r\n+                    type=\"date\"\r\n+                    name=\"startDate\"\r\n+                    value={loan.startDate}\r\n+                    onChange={handleChange}\r\n+                    className=\"w-full border p-2\"\r\n+                />\r\n \r\n-            <label>Start Date</label>\r\n-            <input\r\n-                type=\"date\"\r\n-                name=\"startDate\"\r\n-                value={formData.startDate}\r\n-                onChange={handleChange}\r\n-                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n-            />\r\n+                <label>End Date</label>\r\n+                <input\r\n+                    type=\"date\"\r\n+                    name=\"endDate\"\r\n+                    value={loan.endDate}\r\n+                    onChange={handleChange}\r\n+                    className=\"w-full border p-2\"\r\n+                />\r\n \r\n-            <label>End Date</label>\r\n-            <input\r\n-                type=\"date\"\r\n-                name=\"endDate\"\r\n-                value={formData.endDate}\r\n-                onChange={handleChange}\r\n-                className=\"w-full border border-gray-600 bg-gray-700 p-2 rounded text-gray-100\"\r\n-            />\r\n+                <label>Interest Rate (%)</label>\r\n+                <input\r\n+                    type=\"number\"\r\n+                    name=\"interestRate\"\r\n+                    value={loan.interestRate}\r\n+                    onChange={handleChange}\r\n+                    className=\"w-full border p-2\"\r\n+                />\r\n \r\n-            <button\r\n-                type=\"submit\"\r\n-                className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded\"\r\n-            >\r\n-                {id ? \"Update Loan\" : \"Create Loan\"}\r\n-            </button>\r\n-        </form>\r\n+                <button\r\n+                    type=\"submit\"\r\n+                    className=\"bg-blue-500 text-white px-4 py-2 rounded\"\r\n+                >\r\n+                    {id ? \"Update\" : \"Create\"}\r\n+                </button>\r\n+            </form>\r\n+        </div>\r\n     );\r\n };\r\n \r\n export default LoanForm;\r\n"
                },
                {
                    "date": 1770563881462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,9 +120,9 @@\n                 />\r\n \r\n                 <button\r\n                     type=\"submit\"\r\n-                    className=\"bg-blue-500 text-white px-4 py-2 rounded\"\r\n+                    className=\"bg-gray-500 text-white px-4 py-2 rounded\"\r\n                 >\r\n                     {id ? \"Update\" : \"Create\"}\r\n                 </button>\r\n             </form>\r\n"
                },
                {
                    "date": 1770576052040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import { useState, useEffect } from \"react\";\r\n import { useNavigate, useParams } from \"react-router-dom\";\r\n import { createLoan, getLoanById, updateLoan } from \"../../api/loanApi\";\r\n import { getBorrowers } from \"../../api/borrowerApi\";\r\n+import PageToolbar from \"../../components/PageToolbar\";\r\n \r\n const LoanForm = () => {\r\n     const [loan, setLoan] = useState({\r\n         borrower: \"\",\r\n@@ -56,9 +57,9 @@\n     };\r\n \r\n     return (\r\n         <div className=\"max-w-md mx-auto\">\r\n-            <h1 className=\"text-2xl font-bold mb-4\">{id ? \"Edit\" : \"Add\"} Loan</h1>\r\n+            <PageToolbar title={id ? \"Edit Loan\" : \"Add Loan\"} />\r\n             <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n                 <label>Borrower</label>\r\n                 <select\r\n                     name=\"borrower\"\r\n"
                },
                {
                    "date": 1770577172321,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { useNavigate, useParams } from \"react-router-dom\";\r\n import { createLoan, getLoanById, updateLoan } from \"../../api/loanApi\";\r\n import { getBorrowers } from \"../../api/borrowerApi\";\r\n import PageToolbar from \"../../components/PageToolbar\";\r\n+import FormRow from \"../../components/FormRow\";\r\n \r\n const LoanForm = () => {\r\n     const [loan, setLoan] = useState({\r\n         borrower: \"\",\r\n@@ -21,9 +22,8 @@\n         getBorrowers().then(setBorrowers);\r\n \r\n         if (id) {\r\n             getLoanById(id).then((data) => {\r\n-                // Fix: convert dates to YYYY-MM-DD format for input[type=\"date\"]\r\n                 setLoan({\r\n                     ...data,\r\n                     startDate: data.startDate ? data.startDate.slice(0, 10) : \"\",\r\n                     endDate: data.endDate ? data.endDate.slice(0, 10) : \"\",\r\n@@ -36,9 +36,8 @@\n \r\n     const handleSubmit = async (e) => {\r\n         e.preventDefault();\r\n \r\n-        // Fix: convert startDate/endDate strings to Date objects for backend\r\n         const payload = {\r\n             ...loan,\r\n             amount: Number(loan.amount),\r\n             interestRate: Number(loan.interestRate),\r\n@@ -58,75 +57,85 @@\n \r\n     return (\r\n         <div className=\"max-w-md mx-auto\">\r\n             <PageToolbar title={id ? \"Edit Loan\" : \"Add Loan\"} />\r\n+\r\n             <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n-                <label>Borrower</label>\r\n-                <select\r\n-                    name=\"borrower\"\r\n-                    value={loan.borrower}\r\n-                    onChange={handleChange}\r\n-                    className=\"w-full border p-2\"\r\n-                >\r\n-                    <option value=\"\">Select Borrower</option>\r\n-                    {borrowers.map((b) => (\r\n-                        <option key={b._id} value={b._id}>\r\n-                            {b.fullName}\r\n-                        </option>\r\n-                    ))}\r\n-                </select>\r\n \r\n-                <label>Amount</label>\r\n-                <input\r\n-                    type=\"number\"\r\n-                    name=\"amount\"\r\n-                    value={loan.amount}\r\n-                    onChange={handleChange}\r\n-                    className=\"w-full border p-2\"\r\n-                />\r\n+                <FormRow label=\"Borrower\">\r\n+                    <select\r\n+                        name=\"borrower\"\r\n+                        value={loan.borrower}\r\n+                        onChange={handleChange}\r\n+                        className=\"w-full border p-2 rounded\"\r\n+                    >\r\n+                        <option value=\"\">Select Borrower</option>\r\n+                        {borrowers.map((b) => (\r\n+                            <option key={b._id} value={b._id}>\r\n+                                {b.fullName}\r\n+                            </option>\r\n+                        ))}\r\n+                    </select>\r\n+                </FormRow>\r\n \r\n-                <label>Loan Type</label>\r\n-                <input\r\n-                    type=\"text\"\r\n-                    name=\"type\"\r\n-                    value={loan.type}\r\n-                    onChange={handleChange}\r\n-                    className=\"w-full border p-2\"\r\n-                />\r\n+                <FormRow label=\"Amount\">\r\n+                    <input\r\n+                        type=\"number\"\r\n+                        name=\"amount\"\r\n+                        value={loan.amount}\r\n+                        onChange={handleChange}\r\n+                        className=\"w-full border p-2 rounded\"\r\n+                    />\r\n+                </FormRow>\r\n \r\n-                <label>Start Date</label>\r\n-                <input\r\n-                    type=\"date\"\r\n-                    name=\"startDate\"\r\n-                    value={loan.startDate}\r\n-                    onChange={handleChange}\r\n-                    className=\"w-full border p-2\"\r\n-                />\r\n+                <FormRow label=\"Loan Type\">\r\n+                    <input\r\n+                        type=\"text\"\r\n+                        name=\"type\"\r\n+                        value={loan.type}\r\n+                        onChange={handleChange}\r\n+                        className=\"w-full border p-2 rounded\"\r\n+                    />\r\n+                </FormRow>\r\n \r\n-                <label>End Date</label>\r\n-                <input\r\n-                    type=\"date\"\r\n-                    name=\"endDate\"\r\n-                    value={loan.endDate}\r\n-                    onChange={handleChange}\r\n-                    className=\"w-full border p-2\"\r\n-                />\r\n+                <FormRow label=\"Start Date\">\r\n+                    <input\r\n+                        type=\"date\"\r\n+                        name=\"startDate\"\r\n+                        value={loan.startDate}\r\n+                        onChange={handleChange}\r\n+                        className=\"w-full border p-2 rounded\"\r\n+                    />\r\n+                </FormRow>\r\n \r\n-                <label>Interest Rate (%)</label>\r\n-                <input\r\n-                    type=\"number\"\r\n-                    name=\"interestRate\"\r\n-                    value={loan.interestRate}\r\n-                    onChange={handleChange}\r\n-                    className=\"w-full border p-2\"\r\n-                />\r\n+                <FormRow label=\"End Date\">\r\n+                    <input\r\n+                        type=\"date\"\r\n+                        name=\"endDate\"\r\n+                        value={loan.endDate}\r\n+                        onChange={handleChange}\r\n+                        className=\"w-full border p-2 rounded\"\r\n+                    />\r\n+                </FormRow>\r\n \r\n-                <button\r\n-                    type=\"submit\"\r\n-                    className=\"bg-gray-500 text-white px-4 py-2 rounded\"\r\n-                >\r\n-                    {id ? \"Update\" : \"Create\"}\r\n-                </button>\r\n+                <FormRow label=\"Interest Rate (%)\">\r\n+                    <input\r\n+                        type=\"number\"\r\n+                        name=\"interestRate\"\r\n+                        value={loan.interestRate}\r\n+                        onChange={handleChange}\r\n+                        className=\"w-full border p-2 rounded\"\r\n+                    />\r\n+                </FormRow>\r\n+\r\n+                <div className=\"flex justify-end\">\r\n+                    <button\r\n+                        type=\"submit\"\r\n+                        className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\r\n+                    >\r\n+                        {id ? \"Update\" : \"Create\"}\r\n+                    </button>\r\n+                </div>\r\n             </form>\r\n         </div>\r\n     );\r\n };\r\n"
                },
                {
                    "date": 1770577730829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,89 +55,90 @@\n         }\r\n     };\r\n \r\n     return (\r\n-        <div className=\"max-w-md mx-auto\">\r\n+        <>\r\n             <PageToolbar title={id ? \"Edit Loan\" : \"Add Loan\"} />\r\n+            <div className=\"max-w-md mx-auto\">\r\n+                <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n \r\n-            <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n+                    <FormRow label=\"Borrower\">\r\n+                        <select\r\n+                            name=\"borrower\"\r\n+                            value={loan.borrower}\r\n+                            onChange={handleChange}\r\n+                            className=\"w-full border p-2 rounded\"\r\n+                        >\r\n+                            <option value=\"\">Select Borrower</option>\r\n+                            {borrowers.map((b) => (\r\n+                                <option key={b._id} value={b._id}>\r\n+                                    {b.fullName}\r\n+                                </option>\r\n+                            ))}\r\n+                        </select>\r\n+                    </FormRow>\r\n \r\n-                <FormRow label=\"Borrower\">\r\n-                    <select\r\n-                        name=\"borrower\"\r\n-                        value={loan.borrower}\r\n-                        onChange={handleChange}\r\n-                        className=\"w-full border p-2 rounded\"\r\n-                    >\r\n-                        <option value=\"\">Select Borrower</option>\r\n-                        {borrowers.map((b) => (\r\n-                            <option key={b._id} value={b._id}>\r\n-                                {b.fullName}\r\n-                            </option>\r\n-                        ))}\r\n-                    </select>\r\n-                </FormRow>\r\n+                    <FormRow label=\"Amount\">\r\n+                        <input\r\n+                            type=\"number\"\r\n+                            name=\"amount\"\r\n+                            value={loan.amount}\r\n+                            onChange={handleChange}\r\n+                            className=\"w-full border p-2 rounded\"\r\n+                        />\r\n+                    </FormRow>\r\n \r\n-                <FormRow label=\"Amount\">\r\n-                    <input\r\n-                        type=\"number\"\r\n-                        name=\"amount\"\r\n-                        value={loan.amount}\r\n-                        onChange={handleChange}\r\n-                        className=\"w-full border p-2 rounded\"\r\n-                    />\r\n-                </FormRow>\r\n+                    <FormRow label=\"Loan Type\">\r\n+                        <input\r\n+                            type=\"text\"\r\n+                            name=\"type\"\r\n+                            value={loan.type}\r\n+                            onChange={handleChange}\r\n+                            className=\"w-full border p-2 rounded\"\r\n+                        />\r\n+                    </FormRow>\r\n \r\n-                <FormRow label=\"Loan Type\">\r\n-                    <input\r\n-                        type=\"text\"\r\n-                        name=\"type\"\r\n-                        value={loan.type}\r\n-                        onChange={handleChange}\r\n-                        className=\"w-full border p-2 rounded\"\r\n-                    />\r\n-                </FormRow>\r\n+                    <FormRow label=\"Start Date\">\r\n+                        <input\r\n+                            type=\"date\"\r\n+                            name=\"startDate\"\r\n+                            value={loan.startDate}\r\n+                            onChange={handleChange}\r\n+                            className=\"w-full border p-2 rounded\"\r\n+                        />\r\n+                    </FormRow>\r\n \r\n-                <FormRow label=\"Start Date\">\r\n-                    <input\r\n-                        type=\"date\"\r\n-                        name=\"startDate\"\r\n-                        value={loan.startDate}\r\n-                        onChange={handleChange}\r\n-                        className=\"w-full border p-2 rounded\"\r\n-                    />\r\n-                </FormRow>\r\n+                    <FormRow label=\"End Date\">\r\n+                        <input\r\n+                            type=\"date\"\r\n+                            name=\"endDate\"\r\n+                            value={loan.endDate}\r\n+                            onChange={handleChange}\r\n+                            className=\"w-full border p-2 rounded\"\r\n+                        />\r\n+                    </FormRow>\r\n \r\n-                <FormRow label=\"End Date\">\r\n-                    <input\r\n-                        type=\"date\"\r\n-                        name=\"endDate\"\r\n-                        value={loan.endDate}\r\n-                        onChange={handleChange}\r\n-                        className=\"w-full border p-2 rounded\"\r\n-                    />\r\n-                </FormRow>\r\n+                    <FormRow label=\"Interest Rate (%)\">\r\n+                        <input\r\n+                            type=\"number\"\r\n+                            name=\"interestRate\"\r\n+                            value={loan.interestRate}\r\n+                            onChange={handleChange}\r\n+                            className=\"w-full border p-2 rounded\"\r\n+                        />\r\n+                    </FormRow>\r\n \r\n-                <FormRow label=\"Interest Rate (%)\">\r\n-                    <input\r\n-                        type=\"number\"\r\n-                        name=\"interestRate\"\r\n-                        value={loan.interestRate}\r\n-                        onChange={handleChange}\r\n-                        className=\"w-full border p-2 rounded\"\r\n-                    />\r\n-                </FormRow>\r\n-\r\n-                <div className=\"flex justify-end\">\r\n-                    <button\r\n-                        type=\"submit\"\r\n-                        className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\r\n-                    >\r\n-                        {id ? \"Update\" : \"Create\"}\r\n-                    </button>\r\n-                </div>\r\n-            </form>\r\n-        </div>\r\n+                    <div className=\"flex justify-end\">\r\n+                        <button\r\n+                            type=\"submit\"\r\n+                            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\r\n+                        >\r\n+                            {id ? \"Update\" : \"Create\"}\r\n+                        </button>\r\n+                    </div>\r\n+                </form>\r\n+            </div>\r\n+        </>\r\n     );\r\n };\r\n \r\n export default LoanForm;\r\n"
                },
                {
                    "date": 1770582036169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,13 +7,13 @@\n \r\n const LoanForm = () => {\r\n     const [loan, setLoan] = useState({\r\n         borrower: \"\",\r\n-        amount: \"\",\r\n+        amount: 0,\r\n         type: \"\",\r\n         startDate: \"\",\r\n         endDate: \"\",\r\n-        interestRate: \"\",\r\n+        interestRate: 5,\r\n     });\r\n     const [borrowers, setBorrowers] = useState([]);\r\n     const navigate = useNavigate();\r\n     const { id } = useParams();\r\n"
                },
                {
                    "date": 1770582159871,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,15 +87,18 @@\n                         />\r\n                     </FormRow>\r\n \r\n                     <FormRow label=\"Loan Type\">\r\n-                        <input\r\n-                            type=\"text\"\r\n+                        <select\r\n                             name=\"type\"\r\n                             value={loan.type}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n-                        />\r\n+                        >\r\n+                            <option value=\"\">Select Loan Type</option>\r\n+                            <option value=\"Personal\">Personal</option>\r\n+                            <option value=\"Mortgage\">Mortgage</option>\r\n+                        </select>\r\n                     </FormRow>\r\n \r\n                     <FormRow label=\"Start Date\">\r\n                         <input\r\n"
                },
                {
                    "date": 1770582194472,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,8 +83,9 @@\n                             name=\"amount\"\r\n                             value={loan.amount}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n+                            required\r\n                         />\r\n                     </FormRow>\r\n \r\n                     <FormRow label=\"Loan Type\">\r\n@@ -92,8 +93,9 @@\n                             name=\"type\"\r\n                             value={loan.type}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n+                            required\r\n                         >\r\n                             <option value=\"\">Select Loan Type</option>\r\n                             <option value=\"Personal\">Personal</option>\r\n                             <option value=\"Mortgage\">Mortgage</option>\r\n"
                },
                {
                    "date": 1770582232477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,8 +66,9 @@\n                             name=\"borrower\"\r\n                             value={loan.borrower}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n+                            required\r\n                         >\r\n                             <option value=\"\">Select Borrower</option>\r\n                             {borrowers.map((b) => (\r\n                                 <option key={b._id} value={b._id}>\r\n@@ -108,8 +109,9 @@\n                             name=\"startDate\"\r\n                             value={loan.startDate}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n+                            required\r\n                         />\r\n                     </FormRow>\r\n \r\n                     <FormRow label=\"End Date\">\r\n@@ -118,8 +120,9 @@\n                             name=\"endDate\"\r\n                             value={loan.endDate}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n+                            required\r\n                         />\r\n                     </FormRow>\r\n \r\n                     <FormRow label=\"Interest Rate (%)\">\r\n@@ -128,8 +131,9 @@\n                             name=\"interestRate\"\r\n                             value={loan.interestRate}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n+                            required\r\n                         />\r\n                     </FormRow>\r\n \r\n                     <div className=\"flex justify-end\">\r\n"
                },
                {
                    "date": 1770582363669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,19 +18,24 @@\n     const navigate = useNavigate();\r\n     const { id } = useParams();\r\n \r\n     useEffect(() => {\r\n-        getBorrowers().then(setBorrowers);\r\n+        const fetchData = async () => {\r\n+            const loansData = await getLoans();\r\n+            setLoans(loansData);\r\n \r\n-        if (id) {\r\n-            getLoanById(id).then((data) => {\r\n-                setLoan({\r\n-                    ...data,\r\n-                    startDate: data.startDate ? data.startDate.slice(0, 10) : \"\",\r\n-                    endDate: data.endDate ? data.endDate.slice(0, 10) : \"\",\r\n+            if (id) {\r\n+                const data = await getContractById(id);\r\n+                setContract({\r\n+                    loan: data.loan?._id || \"\",\r\n+                    document: null,\r\n+                    documentUrl: data.documentUrl || \"\",\r\n+                    signingDate: data.signingDate ? data.signingDate.slice(0, 10) : \"\",\r\n                 });\r\n-            });\r\n-        }\r\n+            }\r\n+        };\r\n+\r\n+        fetchData();\r\n     }, [id]);\r\n \r\n     const handleChange = (e) => setLoan({ ...loan, [e.target.name]: e.target.value });\r\n \r\n"
                },
                {
                    "date": 1770582427946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,18 +19,17 @@\n     const { id } = useParams();\r\n \r\n     useEffect(() => {\r\n         const fetchData = async () => {\r\n-            const loansData = await getLoans();\r\n-            setLoans(loansData);\r\n+            const borrowersData = await getBorrowers();\r\n+            setBorrowers(borrowersData);\r\n \r\n             if (id) {\r\n-                const data = await getContractById(id);\r\n-                setContract({\r\n-                    loan: data.loan?._id || \"\",\r\n-                    document: null,\r\n-                    documentUrl: data.documentUrl || \"\",\r\n-                    signingDate: data.signingDate ? data.signingDate.slice(0, 10) : \"\",\r\n+                const data = await getLoanById(id);\r\n+                setLoan({\r\n+                    ...data,\r\n+                    startDate: data.startDate ? data.startDate.slice(0, 10) : \"\",\r\n+                    endDate: data.endDate ? data.endDate.slice(0, 10) : \"\",\r\n                 });\r\n             }\r\n         };\r\n \r\n"
                },
                {
                    "date": 1770582576242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,23 +18,19 @@\n     const navigate = useNavigate();\r\n     const { id } = useParams();\r\n \r\n     useEffect(() => {\r\n-        const fetchData = async () => {\r\n-            const borrowersData = await getBorrowers();\r\n-            setBorrowers(borrowersData);\r\n+        getBorrowers().then(setBorrowers);\r\n \r\n-            if (id) {\r\n-                const data = await getLoanById(id);\r\n+        if (id) {\r\n+            getLoanById(id).then((data) => {\r\n                 setLoan({\r\n                     ...data,\r\n                     startDate: data.startDate ? data.startDate.slice(0, 10) : \"\",\r\n                     endDate: data.endDate ? data.endDate.slice(0, 10) : \"\",\r\n                 });\r\n-            }\r\n-        };\r\n-\r\n-        fetchData();\r\n+            });\r\n+        }\r\n     }, [id]);\r\n \r\n     const handleChange = (e) => setLoan({ ...loan, [e.target.name]: e.target.value });\r\n \r\n@@ -65,15 +61,12 @@\n             <div className=\"max-w-md mx-auto\">\r\n                 <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n \r\n                     <FormRow label=\"Borrower\">\r\n-                        <select\r\n-                            name=\"borrower\"\r\n+                        <select name=\"borrower\"\r\n                             value={loan.borrower}\r\n                             onChange={handleChange}\r\n-                            className=\"w-full border p-2 rounded\"\r\n-                            required\r\n-                        >\r\n+                            className=\"w-full border p-2 rounded\">\r\n                             <option value=\"\">Select Borrower</option>\r\n                             {borrowers.map((b) => (\r\n                                 <option key={b._id} value={b._id}>\r\n                                     {b.fullName}\r\n@@ -148,9 +141,9 @@\n                             {id ? \"Update\" : \"Create\"}\r\n                         </button>\r\n                     </div>\r\n                 </form>\r\n-            </div>\r\n+            </div >\r\n         </>\r\n     );\r\n };\r\n \r\n"
                },
                {
                    "date": 1770582669924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,9 +59,9 @@\n         <>\r\n             <PageToolbar title={id ? \"Edit Loan\" : \"Add Loan\"} />\r\n             <div className=\"max-w-md mx-auto\">\r\n                 <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n-\r\n+                    {loan.borrower}\r\n                     <FormRow label=\"Borrower\">\r\n                         <select name=\"borrower\"\r\n                             value={loan.borrower}\r\n                             onChange={handleChange}\r\n"
                },
                {
                    "date": 1770582689397,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,9 +59,8 @@\n         <>\r\n             <PageToolbar title={id ? \"Edit Loan\" : \"Add Loan\"} />\r\n             <div className=\"max-w-md mx-auto\">\r\n                 <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n-                    {loan.borrower}\r\n                     <FormRow label=\"Borrower\">\r\n                         <select name=\"borrower\"\r\n                             value={loan.borrower}\r\n                             onChange={handleChange}\r\n"
                },
                {
                    "date": 1770582716191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n             <div className=\"max-w-md mx-auto\">\r\n                 <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n                     <FormRow label=\"Borrower\">\r\n                         <select name=\"borrower\"\r\n-                            value={loan.borrower}\r\n+                            value={loan.borrower._id}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\">\r\n                             <option value=\"\">Select Borrower</option>\r\n                             {borrowers.map((b) => (\r\n"
                },
                {
                    "date": 1770583227534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import { createLoan, getLoanById, updateLoan } from \"../../api/loanApi\";\r\n import { getBorrowers } from \"../../api/borrowerApi\";\r\n import PageToolbar from \"../../components/PageToolbar\";\r\n import FormRow from \"../../components/FormRow\";\r\n+import { getInterestRates } from \"../../api/interestRateApi\";\r\n \r\n const LoanForm = () => {\r\n     const [loan, setLoan] = useState({\r\n         borrower: \"\",\r\n@@ -14,12 +15,23 @@\n         endDate: \"\",\r\n         interestRate: 5,\r\n     });\r\n     const [borrowers, setBorrowers] = useState([]);\r\n+    const [interestRates, setInterestRates] = useState([]);\r\n+\r\n     const navigate = useNavigate();\r\n     const { id } = useParams();\r\n \r\n     useEffect(() => {\r\n+        const fetchInterestRates = async () => {\r\n+            const rates = await getInterestRates();\r\n+            setInterestRates(rates);\r\n+        };\r\n+\r\n+        fetchInterestRates();\r\n+    }, []);\r\n+\r\n+    useEffect(() => {\r\n         getBorrowers().then(setBorrowers);\r\n \r\n         if (id) {\r\n             getLoanById(id).then((data) => {\r\n@@ -121,16 +133,22 @@\n                         />\r\n                     </FormRow>\r\n \r\n                     <FormRow label=\"Interest Rate (%)\">\r\n-                        <input\r\n-                            type=\"number\"\r\n+                        <select\r\n                             name=\"interestRate\"\r\n                             value={loan.interestRate}\r\n                             onChange={handleChange}\r\n                             className=\"w-full border p-2 rounded\"\r\n                             required\r\n-                        />\r\n+                        >\r\n+                            <option value=\"\">Select Rate</option>\r\n+                            {interestRates.map((r) => (\r\n+                                <option key={r.rate} value={r.rate}>\r\n+                                    {r.rate}%\r\n+                                </option>\r\n+                            ))}\r\n+                        </select>\r\n                     </FormRow>\r\n \r\n                     <div className=\"flex justify-end\">\r\n                         <button\r\n"
                }
            ],
            "date": 1770563271435,
            "name": "Commit-0",
            "content": "import { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { createLoan, getLoanById, updateLoan } from \"../../api/loanApi\";\r\nimport { getBorrowers } from \"../../api/borrowerApi\";\r\n\r\nconst LoanForm = () => {\r\n    const [loan, setLoan] = useState({ borrower: \"\", amount: \"\", type: \"\", startDate: \"\", endDate: \"\", interestRate: \"\" });\r\n    const [borrowers, setBorrowers] = useState([]);\r\n    const navigate = useNavigate();\r\n    const { id } = useParams();\r\n\r\n    useEffect(() => {\r\n        getBorrowers().then(setBorrowers);\r\n        if (id) getLoanById(id).then(setLoan);\r\n    }, [id]);\r\n\r\n    const handleChange = e => setLoan({ ...loan, [e.target.name]: e.target.value });\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if (id) await updateLoan(id, loan);\r\n        else await createLoan(loan);\r\n        navigate(\"/loans\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-md mx-auto\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">{id ? \"Edit\" : \"Add\"} Loan</h1>\r\n            <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n                <label>Borrower</label>\r\n                <select name=\"borrower\" value={loan.borrower} onChange={handleChange} className=\"w-full border p-2\">\r\n                    <option value=\"\">Select Borrower</option>\r\n                    {borrowers.map(b => <option key={b._id} value={b._id}>{b.fullName}</option>)}\r\n                </select>\r\n                <label>Amount</label>\r\n                <input type=\"number\" name=\"amount\" value={loan.amount} onChange={handleChange} className=\"w-full border p-2\" />\r\n                <label>Loan Type</label>\r\n                <input type=\"text\" name=\"type\" value={loan.type} onChange={handleChange} className=\"w-full border p-2\" />\r\n                <label>Start Date</label>\r\n                <input type=\"date\" name=\"startDate\" value={loan.startDate} onChange={handleChange} className=\"w-full border p-2\" />\r\n                <label>End Date</label>\r\n                <input type=\"date\" name=\"endDate\" value={loan.endDate} onChange={handleChange} className=\"w-full border p-2\" />\r\n                <label>Interest Rate (%)</label>\r\n                <input type=\"number\" name=\"interestRate\" value={loan.interestRate} onChange={handleChange} className=\"w-full border p-2\" />\r\n                <button type=\"submit\" className=\"bg-gray-500 text-white px-4 py-2 rounded\">{id ? \"Update\" : \"Create\"}</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoanForm;\r\n"
        }
    ]
}