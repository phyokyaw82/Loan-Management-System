{
    "sourceFile": "src/pages/Contracts/ContractList.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1770563271447,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1770568564334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,35 +1,84 @@\n import { useEffect, useState } from \"react\";\r\n-import { getContracts } from \"../../api/contractApi\";\r\n+import { Link } from \"react-router-dom\";\r\n+import { getContracts, deleteContract } from \"../../api/contractApi\";\r\n \r\n const ContractList = () => {\r\n     const [contracts, setContracts] = useState([]);\r\n \r\n-    useEffect(() => { getContracts().then(setContracts); }, []);\r\n+    const fetchContracts = async () => setContracts(await getContracts());\r\n \r\n+    const handleDelete = async (id) => {\r\n+        if (window.confirm(\"Are you sure you want to delete this contract?\")) {\r\n+            await deleteContract(id);\r\n+            fetchContracts();\r\n+        }\r\n+    };\r\n+\r\n+    useEffect(() => {\r\n+        fetchContracts();\r\n+    }, []);\r\n+\r\n     return (\r\n         <div>\r\n             <h1 className=\"text-2xl font-bold mb-4\">Contracts</h1>\r\n+            <Link\r\n+                to=\"/contracts/new\"\r\n+                className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n+            >\r\n+                Add Contract\r\n+            </Link>\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n                         <th className=\"py-2 px-4 border\">Contract ID</th>\r\n                         <th className=\"py-2 px-4 border\">Loan</th>\r\n+                        <th className=\"py-2 px-4 border\">File</th>\r\n                         <th className=\"py-2 px-4 border\">Signing Date</th>\r\n-                        <th className=\"py-2 px-4 border\">Document</th>\r\n+                        <th className=\"py-2 px-4 border\">Actions</th>\r\n                     </tr>\r\n                 </thead>\r\n                 <tbody>\r\n-                    {contracts.map(c => (\r\n+                    {contracts.map((c) => (\r\n                         <tr key={c._id}>\r\n                             <td className=\"py-2 px-4 border\">{c._id}</td>\r\n-                            <td className=\"py-2 px-4 border\">{c.loan?.amount || c.loan}</td>\r\n-                            <td className=\"py-2 px-4 border\">{new Date(c.signingDate).toLocaleDateString()}</td>\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                <a href={`http://localhost:5000/${c.document}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-gray-500\">View</a>\r\n+                                {c.loan?.borrower?.fullName}-{c.loan?.amount || \"-\"}\r\n                             </td>\r\n+                            <td className=\"py-2 px-4 border\">\r\n+                                {c.document ? (\r\n+                                    <a\r\n+                                        href={`http://localhost:5000/${c.document}`}\r\n+                                        target=\"_blank\"\r\n+                                        rel=\"noopener noreferrer\"\r\n+                                        className=\"text-blue-500\"\r\n+                                    >\r\n+                                        View\r\n+                                    </a>\r\n+                                ) : (\r\n+                                    \"-\"\r\n+                                )}\r\n+                            </td>\r\n+                            <td className=\"py-2 px-4 border\">\r\n+                                {c.signingDate ? new Date(c.signingDate).toLocaleDateString() : \"-\"}\r\n+                            </td>\r\n+                            <td className=\"py-2 px-4 border\">\r\n+                                <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">\r\n+                                    Edit\r\n+                                </Link>\r\n+                                <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">\r\n+                                    Delete\r\n+                                </button>\r\n+                            </td>\r\n                         </tr>\r\n                     ))}\r\n+                    {contracts.length === 0 && (\r\n+                        <tr>\r\n+                            <td colSpan=\"5\" className=\"py-2 px-4 text-center text-gray-500\">\r\n+                                No contracts found.\r\n+                            </td>\r\n+                        </tr>\r\n+                    )}\r\n                 </tbody>\r\n             </table>\r\n         </div>\r\n     );\r\n"
                },
                {
                    "date": 1770568697540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n                 className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n             >\r\n                 Add Contract\r\n             </Link>\r\n+\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n                         <th className=\"py-2 px-4 border\">Contract ID</th>\r\n@@ -37,31 +38,45 @@\n                         <th className=\"py-2 px-4 border\">Actions</th>\r\n                     </tr>\r\n                 </thead>\r\n                 <tbody>\r\n+                    {contracts.length === 0 && (\r\n+                        <tr>\r\n+                            <td colSpan=\"5\" className=\"py-2 px-4 text-center text-gray-500\">\r\n+                                No contracts found.\r\n+                            </td>\r\n+                        </tr>\r\n+                    )}\r\n+\r\n                     {contracts.map((c) => (\r\n                         <tr key={c._id}>\r\n                             <td className=\"py-2 px-4 border\">{c._id}</td>\r\n                             <td className=\"py-2 px-4 border\">\r\n                                 {c.loan?.borrower?.fullName}-{c.loan?.amount || \"-\"}\r\n                             </td>\r\n+\r\n+                            {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n                                 {c.document ? (\r\n                                     <a\r\n                                         href={`http://localhost:5000/${c.document}`}\r\n                                         target=\"_blank\"\r\n                                         rel=\"noopener noreferrer\"\r\n                                         className=\"text-blue-500\"\r\n+                                        download\r\n                                     >\r\n-                                        View\r\n+                                        Download\r\n                                     </a>\r\n                                 ) : (\r\n                                     \"-\"\r\n                                 )}\r\n                             </td>\r\n+\r\n                             <td className=\"py-2 px-4 border\">\r\n                                 {c.signingDate ? new Date(c.signingDate).toLocaleDateString() : \"-\"}\r\n                             </td>\r\n+\r\n+                            {/* Actions */}\r\n                             <td className=\"py-2 px-4 border\">\r\n                                 <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">\r\n                                     Edit\r\n                                 </Link>\r\n@@ -70,15 +85,8 @@\n                                 </button>\r\n                             </td>\r\n                         </tr>\r\n                     ))}\r\n-                    {contracts.length === 0 && (\r\n-                        <tr>\r\n-                            <td colSpan=\"5\" className=\"py-2 px-4 text-center text-gray-500\">\r\n-                                No contracts found.\r\n-                            </td>\r\n-                        </tr>\r\n-                    )}\r\n                 </tbody>\r\n             </table>\r\n         </div>\r\n     );\r\n"
                },
                {
                    "date": 1770568736776,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,8 @@\n \r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n-                        <th className=\"py-2 px-4 border\">Contract ID</th>\r\n                         <th className=\"py-2 px-4 border\">Loan</th>\r\n                         <th className=\"py-2 px-4 border\">File</th>\r\n                         <th className=\"py-2 px-4 border\">Signing Date</th>\r\n                         <th className=\"py-2 px-4 border\">Actions</th>\r\n@@ -48,9 +47,8 @@\n                     )}\r\n \r\n                     {contracts.map((c) => (\r\n                         <tr key={c._id}>\r\n-                            <td className=\"py-2 px-4 border\">{c._id}</td>\r\n                             <td className=\"py-2 px-4 border\">\r\n                                 {c.loan?.borrower?.fullName}-{c.loan?.amount || \"-\"}\r\n                             </td>\r\n \r\n"
                },
                {
                    "date": 1770568892581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,11 @@\n                             </td>\r\n \r\n                             {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.document ? (\r\n+                                {c.documentUrl ? (\r\n                                     <a\r\n-                                        href={`http://localhost:5000/${c.document}`}\r\n+                                        href={`http://localhost:5000/${c.documentUrl}`}\r\n                                         target=\"_blank\"\r\n                                         rel=\"noopener noreferrer\"\r\n                                         className=\"text-blue-500\"\r\n                                         download\r\n"
                },
                {
                    "date": 1770569252183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,11 @@\n                             </td>\r\n \r\n                             {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.documentUrl ? (\r\n+                                {c.document ? (\r\n                                     <a\r\n-                                        href={`http://localhost:5000/${c.documentUrl}`}\r\n+                                        href={`http://localhost:5000/${c.document}`}\r\n                                         target=\"_blank\"\r\n                                         rel=\"noopener noreferrer\"\r\n                                         className=\"text-blue-500\"\r\n                                         download\r\n"
                },
                {
                    "date": 1770569262659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n                             {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n                                 {c.document ? (\r\n                                     <a\r\n-                                        href={`http://localhost:5000/${c.document}`}\r\n+                                        href={`http://localhost:5000/${c.documentUrl}`}\r\n                                         target=\"_blank\"\r\n                                         rel=\"noopener noreferrer\"\r\n                                         className=\"text-blue-500\"\r\n                                         download\r\n"
                },
                {
                    "date": 1770569336751,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,8 +61,9 @@\n                                         rel=\"noopener noreferrer\"\r\n                                         className=\"text-blue-500\"\r\n                                         download\r\n                                     >\r\n+                                        {c.documentUrl}\r\n                                         Download\r\n                                     </a>\r\n                                 ) : (\r\n                                     \"-\"\r\n"
                },
                {
                    "date": 1770569394820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,8 @@\n                                         rel=\"noopener noreferrer\"\r\n                                         className=\"text-blue-500\"\r\n                                         download\r\n                                     >\r\n-                                        {c.documentUrl}\r\n                                         Download\r\n                                     </a>\r\n                                 ) : (\r\n                                     \"-\"\r\n"
                },
                {
                    "date": 1770571291669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,88 +1,41 @@\n import { useEffect, useState } from \"react\";\r\n+import { getContracts, deleteContract } from \"../../api/contractApi\";\r\n import { Link } from \"react-router-dom\";\r\n-import { getContracts, deleteContract } from \"../../api/contractApi\";\r\n \r\n const ContractList = () => {\r\n     const [contracts, setContracts] = useState([]);\r\n \r\n     const fetchContracts = async () => setContracts(await getContracts());\r\n+    const handleDelete = async id => { await deleteContract(id); fetchContracts(); };\r\n \r\n-    const handleDelete = async (id) => {\r\n-        if (window.confirm(\"Are you sure you want to delete this contract?\")) {\r\n-            await deleteContract(id);\r\n-            fetchContracts();\r\n-        }\r\n-    };\r\n+    useEffect(() => { fetchContracts(); }, []);\r\n \r\n-    useEffect(() => {\r\n-        fetchContracts();\r\n-    }, []);\r\n-\r\n     return (\r\n         <div>\r\n             <h1 className=\"text-2xl font-bold mb-4\">Contracts</h1>\r\n-            <Link\r\n-                to=\"/contracts/new\"\r\n-                className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n-            >\r\n-                Add Contract\r\n-            </Link>\r\n-\r\n+            <Link to=\"/contracts/new\" className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\">Add Contract</Link>\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n-                        <th className=\"py-2 px-4 border\">Loan</th>\r\n-                        <th className=\"py-2 px-4 border\">File</th>\r\n+                        <th className=\"py-2 px-4 border\">Borrower-Loan</th>\r\n                         <th className=\"py-2 px-4 border\">Signing Date</th>\r\n+                        <th className=\"py-2 px-4 border\">Document</th>\r\n                         <th className=\"py-2 px-4 border\">Actions</th>\r\n                     </tr>\r\n                 </thead>\r\n                 <tbody>\r\n-                    {contracts.length === 0 && (\r\n-                        <tr>\r\n-                            <td colSpan=\"5\" className=\"py-2 px-4 text-center text-gray-500\">\r\n-                                No contracts found.\r\n-                            </td>\r\n-                        </tr>\r\n-                    )}\r\n-\r\n-                    {contracts.map((c) => (\r\n+                    {contracts.map(c => (\r\n                         <tr key={c._id}>\r\n+                            <td className=\"py-2 px-4 border\">{c.loan?.borrower?.fullName}-{c.loan?.amount}</td>\r\n+                            <td className=\"py-2 px-4 border\">{c.signingDate?.slice(0, 10)}</td>\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.loan?.borrower?.fullName}-{c.loan?.amount || \"-\"}\r\n+                                {c.documentUrl && <a href={`http://localhost:5000/uploads/contracts/${c.documentUrl}`} target=\"_blank\" rel=\"noopener noreferrer\">Download</a>}\r\n                             </td>\r\n-\r\n-                            {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.document ? (\r\n-                                    <a\r\n-                                        href={`http://localhost:5000/${c.documentUrl}`}\r\n-                                        target=\"_blank\"\r\n-                                        rel=\"noopener noreferrer\"\r\n-                                        className=\"text-blue-500\"\r\n-                                        download\r\n-                                    >\r\n-                                        Download\r\n-                                    </a>\r\n-                                ) : (\r\n-                                    \"-\"\r\n-                                )}\r\n+                                <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">Edit</Link>\r\n+                                <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">Delete</button>\r\n                             </td>\r\n-\r\n-                            <td className=\"py-2 px-4 border\">\r\n-                                {c.signingDate ? new Date(c.signingDate).toLocaleDateString() : \"-\"}\r\n-                            </td>\r\n-\r\n-                            {/* Actions */}\r\n-                            <td className=\"py-2 px-4 border\">\r\n-                                <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">\r\n-                                    Edit\r\n-                                </Link>\r\n-                                <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">\r\n-                                    Delete\r\n-                                </button>\r\n-                            </td>\r\n                         </tr>\r\n                     ))}\r\n                 </tbody>\r\n             </table>\r\n"
                },
                {
                    "date": 1770571513666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,41 +1,88 @@\n import { useEffect, useState } from \"react\";\r\n+import { Link } from \"react-router-dom\";\r\n import { getContracts, deleteContract } from \"../../api/contractApi\";\r\n-import { Link } from \"react-router-dom\";\r\n \r\n const ContractList = () => {\r\n     const [contracts, setContracts] = useState([]);\r\n \r\n     const fetchContracts = async () => setContracts(await getContracts());\r\n-    const handleDelete = async id => { await deleteContract(id); fetchContracts(); };\r\n \r\n-    useEffect(() => { fetchContracts(); }, []);\r\n+    const handleDelete = async (id) => {\r\n+        if (window.confirm(\"Are you sure you want to delete this contract?\")) {\r\n+            await deleteContract(id);\r\n+            fetchContracts();\r\n+        }\r\n+    };\r\n \r\n+    useEffect(() => {\r\n+        fetchContracts();\r\n+    }, []);\r\n+\r\n     return (\r\n         <div>\r\n             <h1 className=\"text-2xl font-bold mb-4\">Contracts</h1>\r\n-            <Link to=\"/contracts/new\" className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\">Add Contract</Link>\r\n+            <Link\r\n+                to=\"/contracts/new\"\r\n+                className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n+            >\r\n+                Add Contract\r\n+            </Link>\r\n+\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n-                        <th className=\"py-2 px-4 border\">Borrower-Loan</th>\r\n+                        <th className=\"py-2 px-4 border\">Loan</th>\r\n+                        <th className=\"py-2 px-4 border\">File</th>\r\n                         <th className=\"py-2 px-4 border\">Signing Date</th>\r\n-                        <th className=\"py-2 px-4 border\">Document</th>\r\n                         <th className=\"py-2 px-4 border\">Actions</th>\r\n                     </tr>\r\n                 </thead>\r\n                 <tbody>\r\n-                    {contracts.map(c => (\r\n+                    {contracts.length === 0 && (\r\n+                        <tr>\r\n+                            <td colSpan=\"5\" className=\"py-2 px-4 text-center text-gray-500\">\r\n+                                No contracts found.\r\n+                            </td>\r\n+                        </tr>\r\n+                    )}\r\n+\r\n+                    {contracts.map((c) => (\r\n                         <tr key={c._id}>\r\n-                            <td className=\"py-2 px-4 border\">{c.loan?.borrower?.fullName}-{c.loan?.amount}</td>\r\n-                            <td className=\"py-2 px-4 border\">{c.signingDate?.slice(0, 10)}</td>\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.documentUrl && <a href={`http://localhost:5000/uploads/contracts/${c.documentUrl}`} target=\"_blank\" rel=\"noopener noreferrer\">Download</a>}\r\n+                                {c.loan?.borrower?.fullName}-{c.loan?.amount || \"-\"}\r\n                             </td>\r\n+\r\n+                            {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">Edit</Link>\r\n-                                <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">Delete</button>\r\n+                                {c.document ? (\r\n+                                    <a\r\n+                                        href={`http://localhost:5000/${c.documentUrl}`}\r\n+                                        target=\"_blank\"\r\n+                                        rel=\"noopener noreferrer\"\r\n+                                        className=\"text-blue-500\"\r\n+                                        download\r\n+                                    >\r\n+                                        Download\r\n+                                    </a>\r\n+                                ) : (\r\n+                                    \"-\"\r\n+                                )}\r\n                             </td>\r\n+\r\n+                            <td className=\"py-2 px-4 border\">\r\n+                                {c.signingDate ? new Date(c.signingDate).toLocaleDateString() : \"-\"}\r\n+                            </td>\r\n+\r\n+                            {/* Actions */}\r\n+                            <td className=\"py-2 px-4 border\">\r\n+                                <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">\r\n+                                    Edit\r\n+                                </Link>\r\n+                                <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">\r\n+                                    Delete\r\n+                                </button>\r\n+                            </td>\r\n                         </tr>\r\n                     ))}\r\n                 </tbody>\r\n             </table>\r\n"
                },
                {
                    "date": 1770572515272,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,15 +4,17 @@\n \r\n const ContractList = () => {\r\n     const [contracts, setContracts] = useState([]);\r\n \r\n-    const fetchContracts = async () => setContracts(await getContracts());\r\n+    const fetchContracts = async () => {\r\n+        const data = await getContracts();\r\n+        setContracts(data);\r\n+    };\r\n \r\n     const handleDelete = async (id) => {\r\n-        if (window.confirm(\"Are you sure you want to delete this contract?\")) {\r\n-            await deleteContract(id);\r\n-            fetchContracts();\r\n-        }\r\n+        if (!window.confirm(\"Are you sure you want to delete this contract?\")) return;\r\n+        await deleteContract(id);\r\n+        fetchContracts();\r\n     };\r\n \r\n     useEffect(() => {\r\n         fetchContracts();\r\n@@ -30,52 +32,38 @@\n \r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n-                        <th className=\"py-2 px-4 border\">Loan</th>\r\n-                        <th className=\"py-2 px-4 border\">File</th>\r\n+                        <th className=\"py-2 px-4 border\">Borrower-Loan</th>\r\n                         <th className=\"py-2 px-4 border\">Signing Date</th>\r\n+                        <th className=\"py-2 px-4 border\">Document</th>\r\n                         <th className=\"py-2 px-4 border\">Actions</th>\r\n                     </tr>\r\n                 </thead>\r\n                 <tbody>\r\n-                    {contracts.length === 0 && (\r\n-                        <tr>\r\n-                            <td colSpan=\"5\" className=\"py-2 px-4 text-center text-gray-500\">\r\n-                                No contracts found.\r\n-                            </td>\r\n-                        </tr>\r\n-                    )}\r\n-\r\n                     {contracts.map((c) => (\r\n                         <tr key={c._id}>\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.loan?.borrower?.fullName}-{c.loan?.amount || \"-\"}\r\n+                                {c.loan?.borrower?.fullName}-{c.loan?.amount}\r\n                             </td>\r\n-\r\n-                            {/* File column: show Download link if exists */}\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.document ? (\r\n+                                {new Date(c.signingDate).toLocaleDateString()}\r\n+                            </td>\r\n+                            <td className=\"py-2 px-4 border\">\r\n+                                {c.documentUrl ? (\r\n                                     <a\r\n-                                        href={`http://localhost:5000/${c.documentUrl}`}\r\n+                                        href={`http://localhost:5000/${c.documentUrl.replace(\"\\\\\", \"/\")}`}\r\n                                         target=\"_blank\"\r\n                                         rel=\"noopener noreferrer\"\r\n-                                        className=\"text-blue-500\"\r\n-                                        download\r\n+                                        className=\"text-blue-500 underline\"\r\n                                     >\r\n                                         Download\r\n                                     </a>\r\n                                 ) : (\r\n-                                    \"-\"\r\n+                                    \"No file\"\r\n                                 )}\r\n                             </td>\r\n-\r\n                             <td className=\"py-2 px-4 border\">\r\n-                                {c.signingDate ? new Date(c.signingDate).toLocaleDateString() : \"-\"}\r\n-                            </td>\r\n-\r\n-                            {/* Actions */}\r\n-                            <td className=\"py-2 px-4 border\">\r\n                                 <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">\r\n                                     Edit\r\n                                 </Link>\r\n                                 <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">\r\n"
                },
                {
                    "date": 1770575911013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import { useEffect, useState } from \"react\";\r\n import { Link } from \"react-router-dom\";\r\n import { getContracts, deleteContract } from \"../../api/contractApi\";\r\n+import PageToolbar from \"../../components/PageToolbar\";\r\n \r\n const ContractList = () => {\r\n     const [contracts, setContracts] = useState([]);\r\n \r\n"
                },
                {
                    "date": 1770576093476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,16 +22,9 @@\n     }, []);\r\n \r\n     return (\r\n         <div>\r\n-            <h1 className=\"text-2xl font-bold mb-4\">Contracts</h1>\r\n-            <Link\r\n-                to=\"/contracts/new\"\r\n-                className=\"bg-gray-500 text-white px-4 py-2 rounded mb-4 inline-block\"\r\n-            >\r\n-                Add Contract\r\n-            </Link>\r\n-\r\n+            <PageToolbar title=\"Contracts\" buttonLabel=\"Add Contract\" buttonLink=\"/contracts/new\" />\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n                         <th className=\"py-2 px-4 border\">Borrower-Loan</th>\r\n"
                },
                {
                    "date": 1770576115892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n         fetchContracts();\r\n     }, []);\r\n \r\n     return (\r\n-        <div>\r\n+        <>\r\n             <PageToolbar title=\"Contracts\" buttonLabel=\"Add Contract\" buttonLink=\"/contracts/new\" />\r\n             <table className=\"min-w-full bg-white border\">\r\n                 <thead>\r\n                     <tr>\r\n@@ -67,9 +67,9 @@\n                         </tr>\r\n                     ))}\r\n                 </tbody>\r\n             </table>\r\n-        </div>\r\n+        </>\r\n     );\r\n };\r\n \r\n export default ContractList;\r\n"
                },
                {
                    "date": 1770576550132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import { useEffect, useState } from \"react\";\r\n import { Link } from \"react-router-dom\";\r\n import { getContracts, deleteContract } from \"../../api/contractApi\";\r\n import PageToolbar from \"../../components/PageToolbar\";\r\n+import DataTable from \"../../components/DataTable\";\r\n \r\n const ContractList = () => {\r\n     const [contracts, setContracts] = useState([]);\r\n \r\n@@ -10,65 +11,69 @@\n         const data = await getContracts();\r\n         setContracts(data);\r\n     };\r\n \r\n-    const handleDelete = async (id) => {\r\n+    const handleDelete = async (contract) => {\r\n         if (!window.confirm(\"Are you sure you want to delete this contract?\")) return;\r\n-        await deleteContract(id);\r\n+        await deleteContract(contract._id);\r\n         fetchContracts();\r\n     };\r\n \r\n     useEffect(() => {\r\n         fetchContracts();\r\n     }, []);\r\n \r\n+    // Columns configuration\r\n+    const columns = [\r\n+        {\r\n+            key: \"borrowerLoan\",\r\n+            label: \"Borrower-Loan\",\r\n+            render: (c) => `${c.loan?.borrower?.fullName || \"Unknown\"}-${c.loan?.amount || 0}`,\r\n+        },\r\n+        {\r\n+            key: \"signingDate\",\r\n+            label: \"Signing Date\",\r\n+            render: (c) => c.signingDate ? new Date(c.signingDate).toLocaleDateString() : \"-\",\r\n+        },\r\n+        {\r\n+            key: \"document\",\r\n+            label: \"Document\",\r\n+            render: (c) =>\r\n+                c.documentUrl ? (\r\n+                    <a\r\n+                        href={`http://localhost:5000/${c.documentUrl.replace(\"\\\\\", \"/\")}`}\r\n+                        target=\"_blank\"\r\n+                        rel=\"noopener noreferrer\"\r\n+                        className=\"text-blue-500 underline\"\r\n+                    >\r\n+                        Download\r\n+                    </a>\r\n+                ) : (\r\n+                    \"No file\"\r\n+                ),\r\n+        },\r\n+    ];\r\n+\r\n+    // Actions configuration\r\n+    const actions = [\r\n+        {\r\n+            type: \"link\",\r\n+            label: \"Edit\",\r\n+            to: (c) => `/contracts/edit/${c._id}`,\r\n+            className: \"text-blue-500\",\r\n+        },\r\n+        {\r\n+            type: \"button\",\r\n+            label: \"Delete\",\r\n+            onClick: handleDelete,\r\n+            className: \"text-red-500\",\r\n+        },\r\n+    ];\r\n+\r\n     return (\r\n         <>\r\n             <PageToolbar title=\"Contracts\" buttonLabel=\"Add Contract\" buttonLink=\"/contracts/new\" />\r\n-            <table className=\"min-w-full bg-white border\">\r\n-                <thead>\r\n-                    <tr>\r\n-                        <th className=\"py-2 px-4 border\">Borrower-Loan</th>\r\n-                        <th className=\"py-2 px-4 border\">Signing Date</th>\r\n-                        <th className=\"py-2 px-4 border\">Document</th>\r\n-                        <th className=\"py-2 px-4 border\">Actions</th>\r\n-                    </tr>\r\n-                </thead>\r\n-                <tbody>\r\n-                    {contracts.map((c) => (\r\n-                        <tr key={c._id}>\r\n-                            <td className=\"py-2 px-4 border\">\r\n-                                {c.loan?.borrower?.fullName}-{c.loan?.amount}\r\n-                            </td>\r\n-                            <td className=\"py-2 px-4 border\">\r\n-                                {new Date(c.signingDate).toLocaleDateString()}\r\n-                            </td>\r\n-                            <td className=\"py-2 px-4 border\">\r\n-                                {c.documentUrl ? (\r\n-                                    <a\r\n-                                        href={`http://localhost:5000/${c.documentUrl.replace(\"\\\\\", \"/\")}`}\r\n-                                        target=\"_blank\"\r\n-                                        rel=\"noopener noreferrer\"\r\n-                                        className=\"text-blue-500 underline\"\r\n-                                    >\r\n-                                        Download\r\n-                                    </a>\r\n-                                ) : (\r\n-                                    \"No file\"\r\n-                                )}\r\n-                            </td>\r\n-                            <td className=\"py-2 px-4 border\">\r\n-                                <Link to={`/contracts/edit/${c._id}`} className=\"text-blue-500 mr-2\">\r\n-                                    Edit\r\n-                                </Link>\r\n-                                <button onClick={() => handleDelete(c._id)} className=\"text-red-500\">\r\n-                                    Delete\r\n-                                </button>\r\n-                            </td>\r\n-                        </tr>\r\n-                    ))}\r\n-                </tbody>\r\n-            </table>\r\n+            <DataTable columns={columns} data={contracts} actions={actions} />\r\n         </>\r\n     );\r\n };\r\n \r\n"
                }
            ],
            "date": 1770563271447,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\r\nimport { getContracts } from \"../../api/contractApi\";\r\n\r\nconst ContractList = () => {\r\n    const [contracts, setContracts] = useState([]);\r\n\r\n    useEffect(() => { getContracts().then(setContracts); }, []);\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-4\">Contracts</h1>\r\n            <table className=\"min-w-full bg-white border\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"py-2 px-4 border\">Contract ID</th>\r\n                        <th className=\"py-2 px-4 border\">Loan</th>\r\n                        <th className=\"py-2 px-4 border\">Signing Date</th>\r\n                        <th className=\"py-2 px-4 border\">Document</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {contracts.map(c => (\r\n                        <tr key={c._id}>\r\n                            <td className=\"py-2 px-4 border\">{c._id}</td>\r\n                            <td className=\"py-2 px-4 border\">{c.loan?.amount || c.loan}</td>\r\n                            <td className=\"py-2 px-4 border\">{new Date(c.signingDate).toLocaleDateString()}</td>\r\n                            <td className=\"py-2 px-4 border\">\r\n                                <a href={`http://localhost:5000/${c.document}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-gray-500\">View</a>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContractList;\r\n"
        }
    ]
}